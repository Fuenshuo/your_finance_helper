# iOS端APP用户动线文档

## 文档说明

本文档详细描述了iOS端家庭资产记账应用的所有Tab页面、页面内的功能项，以及每个功能对应的UC（User Case）用户动线。

**文档版本**: V1.0  
**更新日期**: 2024年  
**适用范围**: iOS端应用

---

## 一、应用整体架构

### 1.1 导航结构

应用采用**底部Tab导航**架构，包含4个主要Tab页面：

```
MainNavigationScreen (主导航)
├── Tab 1: 家庭信息 (FamilyInfoHomeScreen)
├── Tab 2: 财务规划 (FinancialPlanningHomeScreen)
├── Tab 3: 收支流水 (TransactionFlowHomeScreen)
└── Tab 4: 个人 (PersonalScreen)
```

### 1.2 应用入口流程

```
应用启动
  ↓
HomeScreen (首页路由)
  ↓
判断首次使用
  ├── 是 → OnboardingScreen (引导页) → MainNavigationScreen
  └── 否 → MainNavigationScreen (主导航)
```

---

## 二、Tab 1: 家庭信息

### 2.1 页面概述

**页面名称**: 家庭信息主页 (`FamilyInfoHomeScreen`)  
**页面定位**: 三层架构的第一层 - 静态财务数据管理  
**核心职责**: 统一管理工资收入、资产配置和钱包账户等静态财务信息

### 2.2 页面功能项

#### 2.2.1 工资管理

**功能入口**: 点击"工资管理"卡片  
**目标页面**: `SalaryIncomeSetupScreen` (工资收入设置页面)

**功能描述**:
- 基本工资设置
- 津贴设置（住房、餐补、交通、其他）
- 奖金管理（年终奖、季度奖、项目奖等）
- 个税计算（专项扣除、其他扣除）
- 社保和公积金设置
- 工资预览和计算
- 工资历史记录查看

**用户动线**:
```
家庭信息主页
  ↓ 点击"工资管理"卡片
工资收入设置页面
  ├── 设置基本工资信息
  │   ├── 输入姓名
  │   ├── 输入基本工资
  │   └── 选择发薪日
  ├── 设置津贴
  │   ├── 住房津贴
  │   ├── 餐补津贴
  │   ├── 交通津贴
  │   └── 其他津贴
  ├── 管理奖金
  │   ├── 添加奖金（年终奖/季度奖/项目奖等）
  │   ├── 编辑奖金
  │   └── 删除奖金
  ├── 设置税务扣除
  │   ├── 专项扣除
  │   ├── 其他扣除
  │   └── 个税计算
  ├── 设置社保公积金
  │   ├── 社保扣除
  │   ├── 公积金扣除
  │   └── 其他扣除
  ├── 查看工资预览
  │   ├── 查看税前工资
  │   ├── 查看税后工资
  │   └── 查看各项明细
  └── 保存工资设置
      ↓ 返回
家庭信息主页（数据已更新）
```

**关键操作**:
- 支持AI识别工资条（拍照识别）
- 支持年中模式（年中入职）
- 支持自动计算个税
- 支持工资历史记录查看

#### 2.2.2 资产管理

**功能入口**: 点击"资产管理"卡片  
**目标页面**: `AssetManagementScreen` (资产管理页面)

**功能描述**:
- 资产总览卡片（总资产、净资产、负债率）
- 资产分布可视化（饼图、柱状图）
- 资产列表管理（按分类显示）
- 添加/编辑/删除资产
- 资产详情查看
- 资产历史记录追溯

**资产分类**:
- 流动资产（银行活期、支付宝、微信、货币基金）
- 不动产（房产自住/投资、车位）
- 投资理财（银行理财、定期存款、基金、股票、黄金）
- 消费资产（电脑、家具等）
- 应收款（借出款项、押金、报销款）
- 债务（信用卡、个人借款、房屋贷款、车辆贷款）

**用户动线**:
```
家庭信息主页
  ↓ 点击"资产管理"卡片
资产管理页面
  ├── 查看资产总览
  │   ├── 总资产金额
  │   ├── 净资产金额
  │   └── 负债率
  ├── 查看资产分布图表
  │   ├── 饼图（按分类）
  │   └── 柱状图（按类型）
  ├── 浏览资产列表
  │   ├── 按分类筛选
  │   ├── 查看资产详情
  │   │   ├── 基本信息
  │   │   ├── 估值信息
  │   │   └── 历史记录
  │   ├── 编辑资产
  │   └── 删除资产
  ├── 添加资产
  │   ↓ 点击"添加资产"按钮
  │   添加资产流程页面 (AddAssetFlowScreen)
  │   ├── 选择资产分类
  │   │   ├── 流动资产
  │   │   ├── 不动产
  │   │   ├── 投资理财
  │   │   ├── 消费资产
  │   │   ├── 应收款
  │   │   └── 债务
  │   ├── 选择子分类
  │   ├── 输入资产信息
  │   │   ├── 资产名称
  │   │   ├── 资产价值
  │   │   ├── 购买日期
  │   │   └── 备注信息
  │   └── 保存资产
  └── 查看资产历史
      ↓ 点击"资产历史"入口
      资产历史页面 (AssetHistoryScreen)
      ├── 查看变更记录列表
      ├── 筛选变更类型
      │   ├── 创建
      │   ├── 更新
      │   ├── 删除
      │   └── 估值变更
      └── 查看变更详情
          ↓ 返回
      资产管理页面
```

**关键操作**:
- 支持快速添加资产（快速操作按钮）
- 支持资产估值更新
- 支持资产历史追溯
- 支持资产导出

#### 2.2.3 钱包管理

**功能入口**: 点击"钱包管理"卡片  
**目标页面**: `WalletManagementScreen` (钱包管理页面)

**功能描述**:
- 账户列表展示
- 账户类型管理（现金、银行、信用卡、投资、贷款等）
- 账户余额显示
- 添加/编辑/删除账户
- 账户详情查看

**用户动线**:
```
家庭信息主页
  ↓ 点击"钱包管理"卡片
钱包管理页面
  ├── 查看账户列表
  │   ├── 按类型分组显示
  │   ├── 显示账户余额
  │   └── 显示账户状态
  ├── 查看账户详情
  │   ├── 基本信息
  │   ├── 余额信息
  │   ├── 交易记录
  │   └── 账户设置
  ├── 编辑账户
  │   ├── 修改账户名称
  │   ├── 修改账户类型
  │   └── 修改初始余额
  ├── 删除账户
  └── 添加账户
      ↓ 点击"添加钱包"按钮
      添加钱包页面 (AddWalletScreen)
      ├── 选择账户类型
      │   ├── 现金
      │   ├── 银行账户
      │   ├── 信用卡
      │   ├── 投资账户
      │   └── 贷款账户
      ├── 输入账户信息
      │   ├── 账户名称
      │   ├── 初始余额
      │   ├── 币种
      │   └── 备注信息
      └── 保存账户
          ↓ 返回
      钱包管理页面（账户已添加）
```

**关键操作**:
- 支持快速添加钱包（快速操作按钮）
- 支持多币种账户
- 支持账户余额初始化
- 支持账户关联交易记录

#### 2.2.4 清账管理

**功能入口**: 点击"清账管理"卡片  
**目标页面**: `ClearanceHomeScreen` (清账管理主页)

**功能描述**:
- 清账会话列表
- 创建新的清账会话
- 查看清账历史
- 删除未完成的清账
- 周期差额分析

**用户动线**:
```
家庭信息主页
  ↓ 点击"清账管理"卡片
清账管理主页
  ├── 查看清账会话列表
  │   ├── 进行中的清账
  │   ├── 已完成的清账
  │   └── 清账状态
  ├── 创建新的清账会话
  │   ├── 选择清账周期
  │   ├── 选择清账账户
  │   ├── 输入账户余额
  │   ├── 系统自动计算差额
  │   └── 确认清账
  ├── 查看清账历史
  │   ├── 查看历史清账记录
  │   ├── 查看差额分析
  │   └── 导出清账报告
  └── 删除未完成的清账
      ↓ 返回
家庭信息主页
```

**关键操作**:
- 支持周期对账
- 支持余额盘点
- 支持动账核销
- 支持差额分析

### 2.3 快速操作

**功能入口**: 家庭信息主页底部"快速操作"区域

**功能项**:
1. **添加资产** - 快速跳转到添加资产流程
2. **添加钱包** - 快速跳转到添加钱包页面

---

## 三、Tab 2: 财务规划

### 3.1 页面概述

**页面名称**: 财务规划主页 (`FinancialPlanningHomeScreen`)  
**页面定位**: 三层架构的第二层 - 动态规则配置  
**核心职责**: 制定收入计划和支出计划，实现财务目标的智能管理

### 3.2 页面功能项

#### 3.2.1 还款提醒

**功能位置**: 财务规划主页顶部（自动显示）

**功能描述**:
- 显示今天到期的还款计划
- 显示即将到期的还款计划
- 快速记录还款交易
- 查看还款历史

**用户动线**:
```
财务规划主页
  ↓ 查看还款提醒卡片
还款提醒区域
  ├── 查看今天到期的还款
  │   ├── 还款计划名称
  │   ├── 关联账户
  │   └── 还款金额
  ├── 查看即将到期的还款
  │   ├── 还款计划名称
  │   ├── 关联账户
  │   ├── 还款金额
  │   └── 剩余天数
  ├── 记录还款
  │   ↓ 点击"记录还款"按钮
  │   添加交易页面（预设为支出类型）
  │   ├── 选择支出分类
  │   ├── 输入金额（自动填充）
  │   ├── 选择账户（自动关联）
  │   └── 保存交易
  └── 查看历史
      ↓ 点击"查看历史"按钮
      还款历史页面 (RepaymentHistoryScreen)
      ├── 查看历史还款记录
      ├── 筛选还款计划
      └── 查看还款统计
          ↓ 返回
      财务规划主页
```

#### 3.2.2 收入计划

**功能入口**: 点击"收入计划"卡片  
**目标页面**: `CreateIncomePlanScreen` (创建收入计划页面)

**功能描述**:
- 创建收入计划（普通收入计划/详细工资计划）
- 编辑收入计划
- 删除收入计划
- 查看收入计划列表
- 自动执行收入计划

**用户动线**:
```
财务规划主页
  ↓ 点击"收入计划"卡片
创建收入计划页面
  ├── 选择计划类型
  │   ├── 普通收入计划
  │   │   ├── 计划名称
  │   │   ├── 计划金额
  │   │   ├── 发放频率（月/季/年）
  │   │   └── 开始日期
  │   └── 详细工资计划
  │       ├── 关联工资设置
  │       ├── 自动计算金额
  │       └── 发放频率
  ├── 设置计划详情
  │   ├── 计划名称
  │   ├── 计划金额
  │   ├── 发放频率
  │   ├── 开始日期
  │   └── 关联账户
  ├── 保存计划
  └── 返回财务规划主页
      ↓ 在主页查看计划列表
      收入计划列表
        ├── 查看计划详情
        │   ├── 计划名称
        │   ├── 发放频率
        │   ├── 计划金额
        │   └── 下次执行日期
        ├── 长按计划项
        │   ├── 编辑计划
        │   └── 删除计划
        └── 自动执行收入计划
            ↓ 点击"执行收入计划"按钮
            系统自动生成收入交易
            ↓ 显示执行结果
            财务规划主页（交易已生成）
```

**关键操作**:
- 支持普通收入计划和详细工资计划两种类型
- 支持计划自动执行（自动生成交易）
- 支持计划编辑和删除
- 支持计划状态管理（活跃/暂停）

#### 3.2.3 支出计划

**功能入口**: 点击"支出计划"卡片  
**目标页面**: `CreateExpensePlanScreen` (创建支出计划页面)

**功能描述**:
- 创建支出计划
- 编辑支出计划
- 删除支出计划
- 查看支出计划列表
- 关联还款账户

**用户动线**:
```
财务规划主页
  ↓ 点击"支出计划"卡片
创建支出计划页面
  ├── 选择计划类型
  │   ├── 周期性支出（房贷、车贷等）
  │   ├── 预算约束（日常消费预算）
  │   └── 其他支出计划
  ├── 设置计划详情
  │   ├── 计划名称
  │   ├── 计划金额
  │   ├── 支出频率（月/季/年）
  │   ├── 开始日期
  │   ├── 关联账户（贷款账户）
  │   └── 计划类型
  ├── 保存计划
  └── 返回财务规划主页
      ↓ 在主页查看计划列表
      支出计划列表
        ├── 查看计划详情
        │   ├── 计划名称
        │   ├── 支出频率
        │   ├── 计划金额
        │   ├── 计划类型
        │   └── 关联账户
        └── 长按计划项
            ├── 编辑计划
            └── 删除计划
```

**关键操作**:
- 支持多种支出计划类型
- 支持关联贷款账户
- 支持计划状态管理（活跃/暂停/完成/取消）
- 支持计划编辑和删除

#### 3.2.4 计划执行统计

**功能位置**: 财务规划主页底部

**功能描述**:
- 显示月收入计划总额
- 显示年收入计划总额
- 显示活跃计划数量
- 显示月支出计划总额

**用户动线**:
```
财务规划主页
  ↓ 滚动到底部
计划执行统计卡片
  ├── 查看月收入计划总额
  ├── 查看年收入计划总额
  ├── 查看活跃计划数量
  └── 查看月支出计划总额
```

---

## 四、Tab 3: 收支流水

### 4.1 页面概述

**页面名称**: 收支流水主页 (`TransactionFlowHomeScreen`)  
**页面定位**: 三层架构的第三层 - 实际交易执行  
**核心职责**: 查看所有交易记录，与财务计划智能关联，掌握资金流动情况

### 4.2 页面功能项

#### 4.2.1 本月统计

**功能位置**: 收支流水主页顶部

**功能描述**:
- 显示本月收入总额和笔数
- 显示本月支出总额和笔数
- 显示本月结余（收入-支出）

**用户动线**:
```
收支流水主页
  ↓ 查看本月统计卡片
本月统计区域
  ├── 查看本月收入
  │   ├── 收入总额
  │   └── 收入笔数
  ├── 查看本月支出
  │   ├── 支出总额
  │   └── 支出笔数
  └── 查看本月结余
      ├── 结余金额
      └── 结余状态（正/负）
```

#### 4.2.2 AI智能记账

**功能入口**: 点击"AI智能记账"卡片  
**目标组件**: `AiSmartAccountingWidget` (AI智能记账组件)

**功能描述**:
- 自然语言输入记账
- 发票/银行流水拍照识别记账
- 工资条拍照识别记账

**用户动线**:
```
收支流水主页
  ↓ 点击"AI智能记账"卡片
AI智能记账选择对话框
  ├── 选择记账方式
  │   ├── 语音输入（自然语言）
  │   │   ↓ 点击"语音输入"选项
  │   │   自然语言输入组件
  │   │   ├── 输入自然语言描述
  │   │   │   例如："今天在星巴克买了咖啡，花了35元"
  │   │   ├── AI解析交易信息
  │   │   │   ├── 交易类型（支出）
  │   │   │   ├── 交易分类（餐饮）
  │   │   │   ├── 交易金额（35元）
  │   │   │   ├── 交易日期（今天）
  │   │   │   └── 交易描述（星巴克咖啡）
  │   │   ├── 确认解析结果
  │   │   └── 保存交易
  │   │       ↓ 跳转到添加交易页面（已填充）
  │   │       添加交易页面
  │   │       ├── 确认交易信息
  │   │       ├── 选择账户
  │   │       └── 保存交易
  │   │
  │   ├── 发票识别
  │   │   ↓ 点击"发票识别"选项
  │   │   统一图片识别组件
  │   │   ├── 选择图片（拍照/相册）
  │   │   ├── AI识别发票信息
  │   │   │   ├── 商户名称
  │   │   │   ├── 交易金额
  │   │   │   ├── 交易日期
  │   │   │   ├── 交易分类
  │   │   │   └── 商品明细
  │   │   ├── 确认识别结果
  │   │   └── 保存交易
  │   │       ↓ 跳转到添加交易页面（已填充）
  │   │       添加交易页面
  │   │       ├── 确认交易信息
  │   │       ├── 选择账户
  │   │       └── 保存交易
  │   │
  │   ├── 银行流水识别
  │   │   ↓ 点击"银行流水"选项
  │   │   统一图片识别组件
  │   │   ├── 选择图片（拍照/相册）
  │   │   ├── AI识别银行流水信息
  │   │   │   ├── 交易类型（收入/支出/转账）
  │   │   │   ├── 交易金额
  │   │   │   ├── 交易日期
  │   │   │   ├── 交易对手方
  │   │   │   └── 交易备注
  │   │   ├── 确认识别结果
  │   │   └── 保存交易
  │   │       ↓ 跳转到添加交易页面（已填充）
  │   │       添加交易页面
  │   │       ├── 确认交易信息
  │   │       ├── 选择账户
  │   │       └── 保存交易
  │   │
  │   └── 工资条识别
  │       ↓ 点击"工资条识别"选项
  │       统一图片识别组件
  │       ├── 选择图片（拍照/相册）
  │       ├── AI识别工资条信息
  │       │   ├── 基本工资
  │       │   ├── 津贴明细
  │       │   ├── 奖金明细
  │       │   ├── 扣除明细
  │       │   └── 实发工资
  │       ├── 确认识别结果
  │       └── 保存工资设置
  │           ↓ 跳转到工资收入设置页面（已填充）
  │           工资收入设置页面
  │           ├── 确认工资信息
  │           └── 保存工资设置
  └── 关闭对话框
      ↓ 返回
收支流水主页
```

**关键操作**:
- 支持多种AI识别方式
- 支持识别结果确认和编辑
- 支持自动填充交易表单
- 支持识别历史记录

#### 4.2.3 添加交易

**功能入口**: 点击"添加交易"卡片  
**目标页面**: `AddTransactionScreen` (添加交易页面)

**功能描述**:
- 手动添加交易记录
- 支持收入、支出、转账三种类型
- 关联支出计划和预算
- AI分类推荐

**用户动线**:
```
收支流水主页
  ↓ 点击"添加交易"卡片
添加交易页面
  ├── 选择交易类型
  │   ├── 收入
  │   ├── 支出
  │   └── 转账
  ├── 输入交易信息
  │   ├── 交易描述（AI推荐分类）
  │   ├── 交易金额
  │   ├── 交易分类
  │   │   ├── 选择主分类
  │   │   └── 选择子分类（可选）
  │   ├── 选择账户
  │   │   ├── 收入/支出：选择账户
  │   │   └── 转账：选择转出账户和转入账户
  │   ├── 选择交易日期
  │   ├── 关联支出计划（可选）
  │   ├── 关联预算（可选）
  │   ├── 添加备注
  │   └── 添加图片（发票等）
  ├── AI分类推荐
  │   ├── 输入描述后自动推荐分类
  │   └── 确认或修改推荐结果
  ├── 保存交易
  │   ├── 保存为正式交易
  │   └── 保存为草稿（稍后编辑）
  └── 返回收支流水主页
      ↓ 交易已添加到列表
      收支流水主页（交易列表已更新）
```

**关键操作**:
- 支持AI分类推荐（输入描述后自动推荐）
- 支持关联支出计划和预算
- 支持保存草稿
- 支持添加交易图片
- 支持编辑已有交易

#### 4.2.4 最近交易

**功能位置**: 收支流水主页中部

**功能描述**:
- 显示最近4笔交易记录
- 点击交易项查看详情
- 跳转到完整交易记录页面

**用户动线**:
```
收支流水主页
  ↓ 查看最近交易卡片
最近交易列表
  ├── 查看交易项
  │   ├── 交易图标
  │   ├── 交易描述
  │   ├── 交易分类和账户
  │   └── 交易金额（带正负号）
  ├── 点击交易项
  │   ↓ 跳转到交易详情页面
  │   交易详情页面 (TransactionDetailScreen)
  │   ├── 查看交易详细信息
  │   │   ├── 交易类型
  │   │   ├── 交易金额
  │   │   ├── 交易分类
  │   │   ├── 交易账户
  │   │   ├── 交易日期
  │   │   ├── 交易描述
  │   │   ├── 关联计划
  │   │   └── 交易备注
  │   ├── 编辑交易
  │   └── 删除交易
  │       ↓ 返回
  │       收支流水主页
  └── 点击"查看全部"
      ↓ 跳转到交易记录页面
      交易记录页面 (TransactionRecordsScreen)
      ├── 查看所有交易记录
      ├── 筛选交易
      │   ├── 按类型筛选
      │   ├── 按分类筛选
      │   ├── 按账户筛选
      │   └── 按日期范围筛选
      ├── 搜索交易
      ├── 查看交易详情
      └── 编辑/删除交易
          ↓ 返回
          收支流水主页
```

#### 4.2.5 智能建议

**功能位置**: 收支流水主页底部

**功能描述**:
- 显示重复交易提醒
- 建议创建定期支出计划

**用户动线**:
```
收支流水主页
  ↓ 滚动到底部
智能建议卡片
  ├── 查看智能建议
  │   ├── 重复交易提醒
  │   └── 建议创建支出计划
  └── 点击创建支出计划
      ↓ 跳转到创建支出计划页面
      创建支出计划页面（已预填充信息）
      ├── 确认计划信息
      └── 保存计划
          ↓ 返回
          财务规划主页（计划已创建）
```

---

## 五、Tab 4: 个人

### 5.1 页面概述

**页面名称**: 个人页面 (`PersonalScreen`)  
**页面定位**: 应用设置和个人中心  
**核心职责**: 管理账户设置、AI配置和开发者工具

### 5.2 页面功能项

#### 5.2.1 AI服务配置

**功能入口**: 点击"AI服务配置"卡片  
**目标页面**: `AiConfigScreen` (AI配置页面)

**功能描述**:
- 配置AI服务提供商
- 设置API Key
- 启用/禁用AI功能
- 测试AI服务连接

**用户动线**:
```
个人页面
  ↓ 点击"AI服务配置"卡片
AI配置页面
  ├── 选择AI服务提供商
  │   ├── OpenAI
  │   ├── Google Gemini
  │   ├── 其他提供商
  │   └── 自定义API
  ├── 设置API Key
  │   ├── 输入API Key
  │   └── 保存配置
  ├── 启用AI功能
  │   ├── 大语言分析（自然语言输入）
  │   ├── 图文分析（发票/银行流水识别）
  │   └── 分类推荐
  ├── 测试AI服务
  │   ├── 测试连接
  │   └── 查看测试结果
  └── 返回个人页面
      ↓ 配置已保存
      个人页面（配置状态已更新）
```

**关键操作**:
- 支持多个AI服务提供商
- 支持API Key加密存储
- 支持功能开关控制
- 支持连接测试

#### 5.2.2 开发者模式

**功能入口**: 点击"开发者模式"卡片  
**目标页面**: `DeveloperModeScreen` (开发者模式页面)

**功能描述**:
- 开启/关闭开发者模式
- 数据导出和导入
- 数据库管理
- 测试工具

**用户动线**:
```
个人页面
  ↓ 查看开发者模式卡片
开发者模式区域
  ├── 开启开发者模式
  │   ├── 方式1：连续点击标题5次
  │   └── 方式2：点击"开启开发者模式"按钮
  │       ↓ 开发者模式已开启
  │       个人页面（显示"已开启"标识）
  └── 进入开发者工具
      ↓ 点击"开发者模式"卡片（已开启后）
      开发者模式页面
      ├── 数据管理
      │   ├── 导出数据
      │   │   ├── 导出所有数据
      │   │   ├── 导出交易数据
      │   │   ├── 导出资产数据
      │   │   └── 导出计划数据
      │   ├── 导入数据
      │   │   ├── 选择导入文件
      │   │   └── 确认导入
      │   └── 清空数据
      ├── 数据库管理
      │   ├── 查看数据库信息
      │   ├── 执行SQL查询
      │   └── 数据库备份
      ├── 测试工具
      │   ├── 性能测试
      │   ├── 功能测试
      │   └── 日志查看
      └── 返回个人页面
```

**关键操作**:
- 需要特殊方式开启（防止误操作）
- 支持数据导出和导入
- 支持数据库管理
- 支持测试工具

#### 5.2.3 应用信息

**功能位置**: 个人页面底部

**功能描述**:
- 显示应用版本号
- 显示应用架构信息
- 显示应用状态

**用户动线**:
```
个人页面
  ↓ 滚动到底部
应用信息卡片
  ├── 查看版本号（V3.0）
  ├── 查看架构（三层财务模型）
  └── 查看状态（开发中）
```

#### 5.2.4 关于应用

**功能位置**: 个人页面底部

**功能描述**:
- 显示应用介绍
- 显示功能说明
- 显示架构说明

**用户动线**:
```
个人页面
  ↓ 滚动到底部
关于应用卡片
  ├── 查看应用介绍
  ├── 查看功能说明
  │   ├── 家庭信息维护
  │   ├── 财务计划
  │   └── 交易流水
  └── 查看架构说明
```

---

## 六、跨Tab功能动线

### 6.1 从财务规划到交易流水

**场景**: 在财务规划页面创建支出计划后，需要记录实际还款

**用户动线**:
```
财务规划主页
  ↓ 查看还款提醒
  ↓ 点击"记录还款"按钮
添加交易页面（预设为支出类型）
  ├── 交易类型：支出（已预设）
  ├── 交易金额：自动填充计划金额
  ├── 交易分类：还款相关分类
  ├── 关联账户：自动关联计划账户
  ├── 关联支出计划：自动关联计划
  └── 保存交易
      ↓ 交易已保存
      收支流水主页（交易已添加）
```

### 6.2 从交易流水到财务规划

**场景**: 在交易流水页面发现重复交易，创建定期支出计划

**用户动线**:
```
收支流水主页
  ↓ 查看智能建议
  ↓ 点击"创建支出计划"按钮
创建支出计划页面（已预填充）
  ├── 计划名称：自动填充
  ├── 计划金额：自动填充交易金额
  ├── 支出频率：根据交易频率推荐
  └── 保存计划
      ↓ 计划已保存
      财务规划主页（计划已创建）
```

### 6.3 从家庭信息到交易流水

**场景**: 在工资管理页面设置工资后，自动生成收入交易

**用户动线**:
```
家庭信息主页
  ↓ 工资管理
  ↓ 设置工资信息
  ↓ 保存工资设置
财务规划主页
  ↓ 创建详细工资计划
  ↓ 关联工资设置
  ↓ 执行收入计划
收支流水主页（收入交易已自动生成）
```

### 6.4 从AI识别到交易保存

**场景**: 使用AI识别发票后，保存交易记录

**用户动线**:
```
收支流水主页
  ↓ AI智能记账
  ↓ 发票识别
  ↓ 选择图片
  ↓ AI识别发票信息
  ↓ 确认识别结果
添加交易页面（已填充识别结果）
  ├── 交易描述：商户名称
  ├── 交易金额：识别金额
  ├── 交易分类：AI推荐分类
  ├── 交易日期：识别日期
  ├── 交易图片：识别图片
  ├── 确认/修改信息
  └── 保存交易
      ↓ 交易已保存
      收支流水主页（交易已添加）
```

---

## 七、特殊功能动线

### 7.1 首次使用引导

**用户动线**:
```
应用启动
  ↓ 检测首次使用
引导页面 (OnboardingScreen)
  ├── 欢迎页面
  │   ├── 应用介绍
  │   └── 点击"下一步"
  ├── 功能介绍页面1
  │   ├── 家庭信息维护介绍
  │   └── 点击"下一步"
  ├── 功能介绍页面2
  │   ├── 财务计划介绍
  │   └── 点击"下一步"
  ├── 功能介绍页面3
  │   ├── 交易流水介绍
  │   └── 点击"开始使用"
  └── 跳转到主导航
      ↓
      MainNavigationScreen（家庭信息Tab）
```

### 7.2 数据迁移流程

**用户动线**:
```
应用启动
  ↓ 检测到旧版本数据
数据迁移服务
  ├── 备份旧数据
  ├── 迁移数据格式
  ├── 验证数据完整性
  └── 迁移完成
      ↓
      主导航页面（数据已迁移）
```

---

## 八、用户动线总结

### 8.1 核心用户场景

1. **设置工资信息**
   - 家庭信息 → 工资管理 → 设置工资 → 保存

2. **添加资产**
   - 家庭信息 → 资产管理 → 添加资产 → 选择分类 → 输入信息 → 保存

3. **创建支出计划**
   - 财务规划 → 支出计划 → 创建计划 → 设置详情 → 保存

4. **记录交易**
   - 收支流水 → 添加交易 → 输入信息 → 保存
   - 或：收支流水 → AI智能记账 → 选择方式 → 识别 → 确认 → 保存

5. **查看统计**
   - 收支流水 → 查看本月统计
   - 财务规划 → 查看计划统计

### 8.2 用户操作频率

**高频操作**:
- 添加交易（每日多次）
- 查看交易记录（每日多次）
- 查看统计（每日1-2次）

**中频操作**:
- 创建/编辑计划（每周1-2次）
- 管理资产（每周1次）
- 管理钱包（每周1次）

**低频操作**:
- 设置工资（每月1次）
- 清账管理（每月1次）
- AI配置（首次设置）
- 开发者模式（开发/调试时）

### 8.3 用户操作路径优化建议

1. **快速添加交易**
   - 提供快捷入口（FAB按钮）
   - 支持AI快速识别
   - 支持语音输入

2. **智能关联**
   - 交易自动关联计划
   - 计划自动生成交易
   - 智能分类推荐

3. **数据同步**
   - 跨Tab数据实时更新
   - 统计信息自动计算
   - 提醒信息及时推送

---

## 九、附录

### 9.1 页面路由表

| 页面名称 | 路由路径 | 所属Tab |
|---------|---------|---------|
| 家庭信息主页 | `/family-info` | Tab 1 |
| 工资收入设置 | `/family-info/salary/setup` | Tab 1 |
| 资产管理 | `/family-info/assets` | Tab 1 |
| 添加资产 | `/family-info/assets/add` | Tab 1 |
| 钱包管理 | `/family-info/wallets` | Tab 1 |
| 添加钱包 | `/family-info/wallets/add` | Tab 1 |
| 清账管理 | `/family-info/clearance` | Tab 1 |
| 财务规划主页 | `/financial-planning` | Tab 2 |
| 创建收入计划 | `/financial-planning/income/create` | Tab 2 |
| 创建支出计划 | `/financial-planning/expense/create` | Tab 2 |
| 收支流水主页 | `/transaction-flow` | Tab 3 |
| 添加交易 | `/transaction-flow/add` | Tab 3 |
| 交易记录 | `/transaction-flow/records` | Tab 3 |
| 个人页面 | `/personal` | Tab 4 |
| AI配置 | `/ai-config` | Tab 4 |
| 开发者模式 | `/developer` | Tab 4 |

### 9.2 功能模块映射

| 功能模块 | 主要页面 | 核心功能 |
|---------|---------|---------|
| 家庭信息维护 | FamilyInfoHomeScreen | 工资、资产、钱包、清账 |
| 财务计划 | FinancialPlanningHomeScreen | 收入计划、支出计划、还款提醒 |
| 交易流水 | TransactionFlowHomeScreen | 交易记录、AI记账、统计 |
| 个人中心 | PersonalScreen | AI配置、开发者模式、应用信息 |

### 9.3 数据流向

```
家庭信息（静态数据）
  ↓
财务计划（规则配置）
  ↓
交易流水（实际执行）
  ↓
统计分析（数据展示）
```

---

## 十、文档维护

**维护责任人**: 开发团队  
**更新频率**: 每次重大功能更新后  
**版本历史**:
- V1.0 (2024年): 初始版本，完整记录所有Tab页面和功能动线

---

**文档结束**

