import 'package:flutter/material.dart';
import 'package:flutter/cupertino.dart';

/// 现代 iOS 风格设计系统
/// 核心理念：通透、层级感、微交互
class AppDesignTokens {
  AppDesignTokens._();

  // --- 1. 色彩系统 (Color System) ---

  // iOS 核心蓝 (Standard iOS Blue)
  static const Color _primaryBlue = Color(0xFF007AFF); 
  static const Color _primaryBlueDark = Color(0xFF0A84FF);

  // 高级灰背景 (System Grouped Background)
  static const Color _bgLight = Color(0xFFF2F2F7); 
  static const Color _bgDark = Color(0xFF000000);

  // 卡片表面 (Surface)
  static const Color _surfaceLight = Colors.white;
  static const Color _surfaceDark = Color(0xFF1C1C1E);

  // 错误红 (Soft Error)
  static const Color _errorBgLight = Color(0xFFFFE5E5);
  static const Color _errorTextLight = Color(0xFFD32F2F);
  static const Color _errorBgDark = Color(0xFF421C1C);
  static const Color _errorTextDark = Color(0xFFFF8A80);

  static Color primaryAction(BuildContext context) {
    return Theme.of(context).brightness == Brightness.dark ? _primaryBlueDark : _primaryBlue;
  }

  static Color pageBackground(BuildContext context) {
    return Theme.of(context).brightness == Brightness.dark ? _bgDark : _bgLight;
  }

  static Color surface(BuildContext context) {
    return Theme.of(context).brightness == Brightness.dark ? _surfaceDark : _surfaceLight;
  }

  // 输入框填充色 (iOS Search Bar style)
  static Color inputFill(BuildContext context) {
    return Theme.of(context).brightness == Brightness.dark 
        ? const Color(0xFF2C2C2E) 
        : const Color(0xFFE5E5EA); // iOS 系统灰
  }

  // 有色阴影 (Colored Shadow) - 关键！让界面不脏
  static BoxShadow primaryShadow(BuildContext context) {
    final isDark = Theme.of(context).brightness == Brightness.dark;
    return BoxShadow(
      color: isDark ? Colors.black.withOpacity(0.3) : _primaryBlue.withOpacity(0.15),
      blurRadius: 24,
      offset: const Offset(0, 8),
      spreadRadius: -4,
    );
  }

  // --- 2. 排版系统 (Typography - iOS Human Interface Guidelines) ---
  
  // 统一字体：SF Pro (Flutter默认在iOS上使用)
  // 关键调整：行高 (Height) 设为 1.3-1.5，增加呼吸感
  
  static TextStyle largeTitle(BuildContext context) => TextStyle(
    fontSize: 34, fontWeight: FontWeight.w700, height: 1.2, letterSpacing: -0.5,
    color: _textColor(context),
  );

  static TextStyle title1(BuildContext context) => TextStyle(
    fontSize: 28, fontWeight: FontWeight.w600, height: 1.25, letterSpacing: -0.4,
    color: _textColor(context),
  );

  static TextStyle headline(BuildContext context) => TextStyle(
    fontSize: 17, fontWeight: FontWeight.w600, height: 1.3, letterSpacing: -0.4,
    color: _textColor(context),
  );

  static TextStyle body(BuildContext context) => TextStyle(
    fontSize: 17, fontWeight: FontWeight.w400, height: 1.4, letterSpacing: -0.4,
    color: _textColor(context),
  );

  static TextStyle caption(BuildContext context) => TextStyle(
    fontSize: 13, fontWeight: FontWeight.w400, height: 1.4,
    color: _textColor(context).withOpacity(0.6), // 次级文字
  );

  static Color _textColor(BuildContext context) {
    return Theme.of(context).brightness == Brightness.dark ? Colors.white : Colors.black;
  }

  // --- 3. 间距与圆角 (Metrics) ---

  static const double radiusSmall = 8.0;
  static const double radiusMedium = 16.0; // iOS 现代标准圆角
  static const double radiusLarge = 24.0;
  static const double radiusFull = 999.0;

  static const double spacing4 = 4.0;
  static const double spacing8 = 8.0;
  static const double spacing16 = 16.0;
  static const double spacing24 = 24.0;
  static const double spacing32 = 32.0;
}