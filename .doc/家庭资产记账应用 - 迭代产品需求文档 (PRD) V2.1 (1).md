# 家庭资产记账应用 - 迭代产品需求文档 (PRD) V2.2
**版本: 2.2**

**日期: 2025年9月9日**

## 1. 项目概述
### 1.1 版本目标
V2.0的目标是将产品从一个**被动的资产记录工具**，升级为一个**主动的、智能的财务规划与管理平台**。我们将引入自动化、预算、专业报表和协作功能，赋能个人、家庭乃至微型企业，实现从“事后记录”到“事前规划与实时控制”的根本转变。

### 1.2 核心方法论
本版本将采用**“以复式记账为底层架构，以零基/信封预算为前端用户体验”**的创新混合模式，在保证用户体验简洁易用的同时，为功能的专业性和数据的严谨性提供坚实基础。

## 2. 核心概念定义：资产、资金账户与交易
为了构建严谨的财务模型，我们首先需要清晰定义三个核心概念及其关系。

+ **资产 (Assets)**: 这是最高层级的**分类视图**，代表用户财务状况的聚合。其数值是其下所有“资金账户”余额的计算总和。例如：流动资金、固定资产、负债。
+ **资金账户 (Accounts/Wallets)**: 这是资金的**实际载体**，是交易发生的具体地点。每个“资金账户”必须归属于一个“资产”分类。例如：支付宝、招商银行信用卡、我的房产。
+ **交易 (Transactions)**: 这是最底层的**原子操作**，记录了资金的每一次流动。每一笔交易都必须关联至少一个“资金账户”，并直接导致该账户余额的变化。

**核心逻辑链**: **一笔【交易】的发生，直接改变了【资金账户】的余额，进而实时更新了该账户所属【资产】分类的总额，最终体现在总览仪表盘上。**

## 3. 功能范围
### 3.1 继承与深化功能 (V1.0 -> V2.2)
#### **3.1.1 核心资产与负债管理 (功能深化)**
为了更真实地反映用户的净资产状况，我们需对V1.0中的资产和负债模块进行精细化升级。

**A. 精细化固定资产管理 (新增)**

+ **功能描述**: 引入资产折旧与闲置价值评估，让固定资产的价值能够动态反映其真实市场价值。
+ **需求详述**:
    - **录入属性扩展**: 当用户添加大件固定资产（如汽车、电子产品）时，除原价外，增加以下字段：
        * **购入日期**: 用于计算已使用年限。
        * **折旧方式**: 可选“智能估算”（应用根据品类提供默认年折旧率，如汽车15%/年）或“手动更新”。
        * **当前价值**: 系统根据折旧方式自动计算，用户也可随时手动修正。**该价值将计入总资产**。
    - **闲置价值管理**: 用户可将任意固定资产标记为“闲置”状态，并为其录入一个预估的“二手市场价值”。该价值将作为此项资产的“当前价值”。

**B. 精细化负债管理 (新增)**

+ **功能描述**: 对贷款类负债提供详细的属性设置，系统可自动生成还款计划并更新负债余额。
+ **需求详述**:
    - **录入属性扩展**: 当用户添加贷款类负债（特别是房贷、车贷）时，增加以下字段：
        * **贷款类型**: 如房贷（可细分为商业、公积金、组合贷）、车贷、个人消费贷。
        * **贷款总额**、**年利率**（组合贷支持录入第二个利率）、**贷款期限**。
        * **还款方式**: 如等额本息、等额本金。
        * **首次还款日**。
    - **还款计划自动生成**: 根据以上信息，系统自动计算每月还款额，并生成完整的还款计划表（Amortization Schedule），清晰展示每期还款中的本金和利息构成。
    - **与周期性交易联动**: 用户可将此贷款设置为“周期性交易”，每月还款日，系统将自动记录一笔支出，并**自动更新该笔负债的剩余本金**。

#### **3.1.2 总览仪表盘**
+ **功能描述**: 保留清晰的总资产、净资产、负债率仪表盘。
+ **数据源升级**:
    - **总资产**的计算将基于固定资产的“**当前价值**”，而非“购入原价”。
    - **总负债**的计算将基于贷款的“**剩余本金**”，而非“贷款总额”。

### 2.2 新增核心功能模块 (V2.0)
#### **模块一：智能记账与预算 (从记录到规划)**
**3.3.1 自动化记账**

+ **功能描述**: 通过多渠道自动同步交易流水，将用户从繁琐的手动输入中解放出来，记账行为从“录入”转变为“确认”。
+ **需求详述**:
    - **银行/支付平台同步**: 支持用户授权绑定储蓄卡、信用卡、支付宝等账户，应用定期自动同步交易记录，并生成待确认的账单草稿。
    - **OCR图像识别**: 用户可拍照或上传消费小票、截图，系统通过OCR技术自动提取关键信息（金额、商家、日期等）生成账单草稿。
    - **待处理中心**: 所有自动同步和识别的账单将进入一个“待处理”列表，用户可在此进行快速分类、确认或忽略。

**3.3.2 零基预算与信封预算**

+ **功能描述**: 融合零基预算的规划思想和信封预算的执行控制，引导用户主动规划财务，有效控制支出。
+ **需求详述**:
    - **预算设置**: 用户可在每月初或收入到账后，进入预算模块，系统将引导用户将当期收入分配至不同消费类别的“信封”（如餐饮、交通、购物）中。
    - **实时监控**: 每当一笔记账被确认，系统会自动从对应分类的“信封”中扣除金额，并以进度条形式实时展示预算消耗情况。
    - **超支提醒**: 当任一“信封”预算消耗超过设定阈值（如80%）或超支时，系统将通过推送通知或应用内警告提醒用户。
    - **预算调拨**: 用户可以方便地在不同“信封”之间转移预算额度。

#### **模块二：高级报表与复杂交易 (从看懂到洞察)**
**3.4.1 专业财务报表**

+ **功能描述**: 基于“用户无感的复式记账”底层，自动生成专业级财务报表，为用户提供深度财务洞察。
+ **需求详述**:
    - **资产负债表**: 清晰展示用户在特定时间点的资产、负债和净资产的构成。此报表将直接受益于精细化管理，数据更精准。
    - **损益表 (收支表)**: 汇总特定时期内（如月度、年度）的所有收入和支出，得出净盈余或亏损。
    - **可操作性**: 报表中的每一项数据均可点击钻取，追溯到构成该项的所有原始交易记录。

**3.4.2 复杂交易处理**

+ **功能描述**: 支持现实生活中常见的复杂财务场景，提升记账的准确性和全面性。
+ **需求详述**:
    - **周期性交易**: 支持设置固定收支项目（如工资、房租），并与**精细化贷款的自动还款**功能深度整合。
    - **退款处理**: 提供专门的“退款”交易类型，关联原始支出，系统自动进行账务冲销。
    - **报销管理**: 支持记录“垫付款项”，并管理其报销状态（待报销、已报rayed）。

#### **模块三：商业化与协作 (从个人到团队)**
**3.5.1 多用户共享记账**

+ **功能描述**: 满足家庭、情侣或小型团队共同记账的需求。
+ **需求详述**:
    - **共享账本**: 用户可创建共享账本，并通过链接或账号邀请其他成员加入。
    - **数据同步**: 所有成员的记账操作将实时同步到共享账本中。
    - **权限管理 (付费)**: 账本创建者可设置不同成员的查看或编辑权限。

**3.5.2 个人与商业账户切换**

+ **功能描述**: 为自由职业者和微型企业主提供独立的账户空间，实现个人财务与商业财务的清晰分离。
+ **需求详述**:
    - **账户空间**: 用户可以在应用内创建并一键切换“个人空间”和“商业空间”。
    - **数据隔离**: 不同空间下的账户、账单、预算和报表数据完全独立。
    - **商业报表 (付费)**: 在“商业空间”下，提供应收账款、税务估算等专属报表。

## 3. 商业模式：免费增值 (Freemium)
| 功能模块 | 免费版 (Free) | 专业版 (Pro) - 付费 |
| --- | --- | --- |
| **资产管理** | **✔** (手动记账, 账户数量限制: 10个) | **✔** (无限制账户数量, **精细化资产/负债管理**) |
| **自动化记账** | ✘ | **✔** (银行同步, OCR识别) |
| **预算功能** | **✔** (预算分类数量限制: 5个) | **✔** (无限制预算分类, 预算调拨) |
| **基础报表** | **✔** (收支统计图) | **✔** |
| **专业报表** | ✘ | **✔** (资产负债表, 损益表) |
| **复杂交易** | **✔** (手动退款/报销) | **✔** (周期性交易) |
| **多用户协作** | ✘ | **✔** (支持最多5名成员, 权限管理) |
| **账户空间** | **✔** (仅个人空间) | **✔** (支持个人与商业空间切换) |


