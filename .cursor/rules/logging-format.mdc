---
alwaysApply: true
description: Logging format standards for better debugging and troubleshooting
---

# æ—¥å¿—æ ¼å¼åŒ–è§„èŒƒ

## æ ¸å¿ƒåŸåˆ™
**ä¸Šä¸‹æ–‡ä¼˜å…ˆï¼Œä¿¡æ¯å®Œæ•´** - æ¯ä¸ªæ—¥å¿—å¿…é¡»åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œä¾¿äºåç»­æ’æŸ¥å’Œè°ƒè¯•é—®é¢˜ã€‚

## æ ‡å‡†æ—¥å¿—æ ¼å¼

### åŸºæœ¬æ ¼å¼
```dart
print('[é¡µé¢ç±»å.æ–¹æ³•å] æ“ä½œæè¿°: å…³é”®ä¿¡æ¯');
```

### è¯¦ç»†æ ¼å¼
```dart
print('[é¡µé¢ç±»å.æ–¹æ³•å] [NOTE] æ“ä½œæè¿°: å…³é”®ä¿¡æ¯ | ä¸Šä¸‹æ–‡: ${contextInfo} | çŠ¶æ€: ${stateInfo}');
```

## æ—¥å¿—çº§åˆ«åˆ†ç±»

### ğŸ”µ é¡µé¢å¯¼èˆªæ—¥å¿—
```dart
print('[é¡µé¢ç±»å.initState] [MOBILE] é¡µé¢åˆå§‹åŒ–: å‚æ•°=${widget.param}');
print('[é¡µé¢ç±»å.build] [PAINT] æ„å»ºUI: æ•°æ®é¡¹=${data.length}');
print('[é¡µé¢ç±»å.dispose] [TRASH] é¡µé¢é”€æ¯: æ¸…ç†èµ„æº');
```

### ğŸŸ¡ æ•°æ®æ“ä½œæ—¥å¿—
```dart
print('[é¡µé¢ç±»å._loadData] [CHART] åŠ è½½æ•°æ®: ç”¨æˆ·ID=${userId}, ç±»å‹=${dataType}');
print('[é¡µé¢ç±»å._saveData] [SAVE] ä¿å­˜æ•°æ®: è®°å½•æ•°=${records.length}');
print('[é¡µé¢ç±»å._calculateResult] [CALC] è®¡ç®—ç»“æœ: æ€»é‡‘é¢=${totalAmount}');
```

### ğŸ”´ é”™è¯¯å’Œå¼‚å¸¸æ—¥å¿—
```dart
print('[é¡µé¢ç±»å._handleError] [ERROR] é”™è¯¯å¤„ç†: ${error.message} | å †æ ˆ: ${stackTrace}');
print('[é¡µé¢ç±»å._validateInput] [WARN] éªŒè¯å¤±è´¥: å­—æ®µ=${fieldName}, å€¼=${fieldValue}');
```

### ğŸŸ¢ ä¸šåŠ¡æµç¨‹æ—¥å¿—
```dart
print('[é¡µé¢ç±»å._processBonus] [BONUS] å¤„ç†å¥–é‡‘: ç±»å‹=${bonusType}, é‡‘é¢=${amount}');
print('[é¡µé¢ç±»å._calculateTax] [TAX] è®¡ç®—ç¨è´¹: æ”¶å…¥=${income}, ç¨ç‡=${taxRate}');
print('[é¡µé¢ç±»å._updateBudget] [BUDGET] æ›´æ–°é¢„ç®—: åŸé‡‘é¢=${oldAmount}, æ–°é‡‘é¢=${newAmount}');
```

## ä¸Šä¸‹æ–‡ä¿¡æ¯è¦æ±‚

### å¿…é¡»åŒ…å«ä¿¡æ¯
- **é¡µé¢ç±»å**: å½“å‰æ“ä½œçš„Widgetç±»å
- **æ–¹æ³•å**: å½“å‰æ‰§è¡Œçš„æ–¹æ³•å
- **æ“ä½œç±»å‹**: ç”¨emojiåŒºåˆ†æ“ä½œç±»å‹
- **å…³é”®æ•°æ®**: æ“ä½œæ¶‰åŠçš„å…³é”®æ•°æ®å€¼

### å¯é€‰å¢å¼ºä¿¡æ¯
- **ç”¨æˆ·çŠ¶æ€**: å½“å‰ç”¨æˆ·ç›¸å…³ä¿¡æ¯
- **æ•°æ®çŠ¶æ€**: å½“å‰æ•°æ®çŠ¶æ€å¿«ç…§
- **æ€§èƒ½æŒ‡æ ‡**: æ‰§è¡Œæ—¶é—´ã€æ•°æ®é‡ç­‰
- **è°ƒç”¨é“¾**: ä¸Šçº§æ–¹æ³•çš„è°ƒç”¨å…³ç³»

## æ—¥å¿—ç¤ºä¾‹

### å¥–é‡‘ç®¡ç†é¡µé¢
```dart
print('[BonusDialogManager._showBonusDialog] [BONUS] å¥–é‡‘å¯¹è¯æ¡†: ç±»å‹=${type}, é‡‘é¢=${amount}');
print('[BonusDialogManager._getBasicSalary] [SALARY] è·å–åŸºæœ¬å·¥èµ„: ç”¨æˆ·è–ªèµ„è®°å½•=${salaryRecords.length}');
print('[BonusManagementWidget._addBonus] [ADD] æ·»åŠ å¥–é‡‘: åç§°=${bonusName}, ç±»å‹=${bonusType}');
```

### è–ªèµ„è®¾ç½®é¡µé¢
```dart
print('[SalaryIncomeSetupScreen._calculatePreview] [CALC] é¢„è§ˆè®¡ç®—: åŸºæœ¬å·¥èµ„=${basicSalary}, å¥–é‡‘æ•°=${bonuses.length}');
print('[SalaryIncomeSetupScreen._saveSalaryIncome] [SAVE] ä¿å­˜è–ªèµ„è®¾ç½®: æ€»æ”¶å…¥=${totalIncome}');
print('[SalaryIncomeSetupScreen._navigateToPreview] [NAV] å¯¼èˆªåˆ°é¢„è§ˆ: è–ªèµ„ID=${salaryId}');
```

### æ•°æ®æœåŠ¡å±‚
```dart
print('[StorageService.loadSalaryIncomes] [FOLDER] åŠ è½½è–ªèµ„æ•°æ®: æ–‡ä»¶å¤§å°=${fileSize}å­—èŠ‚');
print('[PersonalIncomeTaxService.calculateTax] [TAX] è®¡ç®—ä¸ªç¨: åº”çº³ç¨æ‰€å¾—é¢=${taxableIncome}');
print('[AssetHistoryService.recordChange] [RECORD] è®°å½•å˜æ›´: ç±»å‹=${changeType}, èµ„äº§ID=${assetId}');
```

## å®ç°æŒ‡å—

### 1. æ–¹æ³•å…¥å£æ—¥å¿—
```dart
void _loadData() {
  print('[$runtimeType._loadData] [CHART] å¼€å§‹åŠ è½½æ•°æ®: å‚æ•°=${widget.param}');
  // ... ä¸šåŠ¡é€»è¾‘
}
```

### 2. å…³é”®èŠ‚ç‚¹æ—¥å¿—
```dart
Future<void> _saveData() async {
  print('[$runtimeType._saveData] [SAVE] å¼€å§‹ä¿å­˜æ•°æ®: è®°å½•æ•°=${data.length}');

  try {
    await storageService.save(data);
    print('[$runtimeType._saveData] [SUCCESS] ä¿å­˜æˆåŠŸ: ID=${savedId}');
  } catch (e) {
    print('[$runtimeType._saveData] [ERROR] ä¿å­˜å¤±è´¥: ${e.message}');
    rethrow;
  }
}
```

### 3. çŠ¶æ€å˜æ›´æ—¥å¿—
```dart
void _updateState() {
  print('[$runtimeType._updateState] [UPDATE] çŠ¶æ€æ›´æ–°: åŸå€¼=${oldValue}, æ–°å€¼=${newValue}');
  setState(() => currentValue = newValue);
}
```

## è°ƒè¯•æŠ€å·§

### 1. æ—¥å¿—è¿‡æ»¤
ä½¿ç”¨ç‰¹å®šçš„emojiå‰ç¼€æ¥è¿‡æ»¤æ—¥å¿—ï¼š
- `grep "ğŸ"` - æŸ¥çœ‹å¥–é‡‘ç›¸å…³æ—¥å¿—
- `grep "ğŸ’°"` - æŸ¥çœ‹è´¢åŠ¡è®¡ç®—æ—¥å¿—
- `grep "ğŸ“±"` - æŸ¥çœ‹é¡µé¢å¯¼èˆªæ—¥å¿—

### 2. æ—¥å¿—çº§åˆ«æ§åˆ¶
```dart
const bool isDebugMode = true; // åœ¨å¼€å‘æ¨¡å¼ä¸‹å¼€å¯è¯¦ç»†æ—¥å¿—

if (isDebugMode) {
  print('[${runtimeType}._detailedLog] ğŸ” è¯¦ç»†æ—¥å¿—: ${debugInfo}');
}
```

### 3. æ€§èƒ½ç›‘æ§
```dart
final startTime = DateTime.now();
// ... æ‰§è¡Œæ“ä½œ
final duration = DateTime.now().difference(startTime);
print('[$runtimeType.${methodName}] [TIMER] æ‰§è¡Œæ—¶é—´: ${duration.inMilliseconds}ms');
```

## å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šæ—¥å¿—å¤ªå¤šéš¾ä»¥å®šä½
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ç‰¹å®šçš„é¡µé¢å‰ç¼€è¿‡æ»¤
- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å…³é—­è¯¦ç»†æ—¥å¿—
- ä½¿ç”¨æ—¥å¿—çº§åˆ«æ§åˆ¶

### é—®é¢˜2ï¼šæ—¥å¿—ä¿¡æ¯ä¸å®Œæ•´
**è§£å†³æ–¹æ¡ˆ**ï¼š
- éµå¾ªæ ‡å‡†æ ¼å¼ï¼Œç¡®ä¿åŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯
- åœ¨æ–¹æ³•å¼€å§‹æ—¶è®°å½•è¾“å…¥å‚æ•°
- åœ¨å…³é”®èŠ‚ç‚¹è®°å½•ä¸­é—´çŠ¶æ€

### é—®é¢˜3ï¼šæ–°é¡µé¢æ²¡æœ‰æ—¥å¿—
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¸ºæ¯ä¸ªæ–°é¡µé¢æ·»åŠ æ ‡å‡†çš„å…¥å£æ—¥å¿—
- åœ¨buildæ–¹æ³•ä¸­æ·»åŠ UIæ„å»ºæ—¥å¿—
- åœ¨å¯¼èˆªæ–¹æ³•ä¸­æ·»åŠ è·³è½¬æ—¥å¿—

## ç›¸å…³æ–‡ä»¶
- [BonusDialogManager](mdc:lib/widgets/bonus_dialog_manager.dart) - å¥–é‡‘å¯¹è¯æ¡†ç®¡ç†
- [SalaryIncomeSetupScreen](mdc:lib/screens/salary_income_setup_screen.dart) - è–ªèµ„è®¾ç½®é¡µé¢
- [StorageService](mdc:lib/services/storage_service.dart) - æ•°æ®å­˜å‚¨æœåŠ¡